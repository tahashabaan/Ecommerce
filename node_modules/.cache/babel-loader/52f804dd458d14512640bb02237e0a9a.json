{"ast":null,"code":"import _regeneratorRuntime from\"X:/kalBanan/udemy/projects/ORDER__FOOD__PROJECT/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"X:/kalBanan/udemy/projects/ORDER__FOOD__PROJECT/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"X:/kalBanan/udemy/projects/ORDER__FOOD__PROJECT/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"X:/kalBanan/udemy/projects/ORDER__FOOD__PROJECT/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import{Fragment}from'react/cjs/react.production.min';import CartContext from'../../store/cart-context';import Modal from'../UI/Modal/Modal';import classes from'./Cart.module.css';import CartItem from'./CartItem';import CheckoutForm from'./CheckoutForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cart=function Cart(props){var ctx=useContext(CartContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),checkForm=_useState2[0],setCheckForm=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSubmiting=_useState4[0],setIsSubmiting=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),didSubmiting=_useState6[0],setDidSubmiting=_useState6[1];var checkOrder=ctx.cartItem.length>0;var addItemCartHandler=function addItemCartHandler(item){ctx.onAddItem(_objectSpread(_objectSpread({},item),{},{amount:1}));};var removeItemCartHandler=function removeItemCartHandler(id){ctx.onRemoveItem(id);};var onOpenFormHandler=function onOpenFormHandler(){setCheckForm(true);};var onCloseFormHandler=function onCloseFormHandler(){setCheckForm(false);};var sendOreder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userdata){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsSubmiting(false);_context.next=3;return fetch('https://react-http-399a8-default-rtdb.firebaseio.com/order.json',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user:userdata,item:ctx.cartItem})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;setIsSubmiting(true);setDidSubmiting(true);case 9:case\"end\":return _context.stop();}}},_callee);}));return function sendOreder(_x){return _ref.apply(this,arguments);};}();var onConfirmHandler=function onConfirmHandler(userdata){sendOreder(userdata);};var totalAmount=\"\".concat(ctx.totalAmount.toFixed(2),\" $\");var modalFormContent=!isSubmiting&&/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"ul\",{className:classes['cart-items'],children:ctx.cartItem.map(function(item){return/*#__PURE__*/_jsx(CartItem,{id:item.id,name:item.name,price:item.price,amount:item.amount,onAdd:addItemCartHandler.bind(null,item),onRemove:removeItemCartHandler.bind(null,item.id)},item.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.total,children:[/*#__PURE__*/_jsx(\"span\",{children:\"totalAmount\"}),/*#__PURE__*/_jsx(\"span\",{children:totalAmount})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.actions,children:[/*#__PURE__*/_jsx(\"button\",{onClick:ctx.onHideCart,className:classes['.button--alt'],children:\"Close\"}),checkOrder&&/*#__PURE__*/_jsx(\"button\",{className:classes.button,onClick:onOpenFormHandler,children:\"Order\"})]}),checkForm&&/*#__PURE__*/_jsx(CheckoutForm,{onConfirm:onConfirmHandler,onClose:onCloseFormHandler})]});var modalLoadingSubmit=isSubmiting&&!didSubmiting&&/*#__PURE__*/_jsx(\"p\",{children:\"loading Submiting...\"});var modalSubmit=didSubmiting&&isSubmiting&&/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"sucessfuly Submiting Data\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(\"button\",{onClick:ctx.onHideCart,className:classes.button,children:\"Close\"})})]});return/*#__PURE__*/_jsxs(Modal,{children:[modalFormContent,modalLoadingSubmit,modalSubmit]});};export default Cart;","map":{"version":3,"names":["React","useContext","useState","Fragment","CartContext","Modal","classes","CartItem","CheckoutForm","Cart","props","ctx","checkForm","setCheckForm","isSubmiting","setIsSubmiting","didSubmiting","setDidSubmiting","checkOrder","cartItem","length","addItemCartHandler","item","onAddItem","amount","removeItemCartHandler","id","onRemoveItem","onOpenFormHandler","onCloseFormHandler","sendOreder","userdata","fetch","method","headers","body","JSON","stringify","user","response","json","data","onConfirmHandler","totalAmount","toFixed","modalFormContent","map","name","price","bind","total","actions","onHideCart","button","modalLoadingSubmit","modalSubmit"],"sources":["X:/kalBanan/udemy/projects/ORDER__FOOD__PROJECT/src/component/Cart/Cart.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport { Fragment } from 'react/cjs/react.production.min';\r\nimport CartContext from '../../store/cart-context';\r\nimport  Modal  from '../UI/Modal/Modal';\r\nimport classes from './Cart.module.css'\r\nimport CartItem from './CartItem';\r\nimport CheckoutForm from './CheckoutForm';\r\n\r\nconst Cart = (props) => {\r\n\r\n  const ctx = useContext(CartContext);\r\n  const [checkForm, setCheckForm] = useState(false);\r\n  const [isSubmiting, setIsSubmiting] = useState(false);\r\n  const [didSubmiting, setDidSubmiting] = useState(false)\r\n\r\n  const checkOrder = ctx.cartItem.length > 0;\r\n  const addItemCartHandler = (item) => {\r\n    ctx.onAddItem({...item, amount:1})\r\n  }\r\n\r\n  const removeItemCartHandler = (id) => {\r\n    ctx.onRemoveItem(id)\r\n  }\r\n\r\n  const onOpenFormHandler = () => {\r\n    setCheckForm(true);\r\n  }\r\n\r\n  const onCloseFormHandler = () => {\r\n    setCheckForm(false);\r\n  }\r\n\r\n  const sendOreder = async (userdata) => {\r\n    setIsSubmiting(false)\r\n    const response = await fetch('https://react-http-399a8-default-rtdb.firebaseio.com/order.json',{\r\n      method:'POST',\r\n      headers:{\r\n        'Content-Type':'application/json'\r\n      },\r\n      body:JSON.stringify({\r\n        user:userdata,\r\n        item:ctx.cartItem\r\n      })\r\n    })\r\n\r\n    const data = await response.json();\r\n    setIsSubmiting(true);\r\n    setDidSubmiting(true)\r\n\r\n  }\r\n\r\n  const onConfirmHandler = (userdata) => {\r\n    sendOreder(userdata);\r\n  }\r\n\r\n  const totalAmount = `${ctx.totalAmount.toFixed(2)} $`;\r\n\r\n  const modalFormContent  = !isSubmiting && <Fragment>\r\n    <ul className={classes['cart-items']}>\r\n        {ctx.cartItem.map((item) => <CartItem\r\n          key={item.id}\r\n          id={item.id}\r\n          name={item.name}\r\n          price={item.price}\r\n          amount={item.amount}\r\n          onAdd={addItemCartHandler.bind(null, item)}\r\n          onRemove={removeItemCartHandler.bind(null,item.id)}\r\n          />)}\r\n        </ul>\r\n        <div className={classes.total}>\r\n          <span>totalAmount</span>\r\n          <span>{totalAmount}</span>\r\n        </div>\r\n       <div className={classes.actions}>\r\n        <button  onClick={ctx.onHideCart}\r\n         className={classes['.button--alt']}>\r\n          Close\r\n        </button>\r\n        {checkOrder && <button className={classes.button} \r\n         onClick={onOpenFormHandler}>\r\n          Order\r\n        </button>}\r\n      </div>\r\n      {checkForm && <CheckoutForm onConfirm={onConfirmHandler}\r\n       onClose={onCloseFormHandler}/>}\r\n  </Fragment>\r\n\r\n  const modalLoadingSubmit = isSubmiting &&!didSubmiting && <p>\r\n    loading Submiting...</p>\r\n\r\nconst modalSubmit = didSubmiting && isSubmiting &&<Fragment>\r\n  <p>sucessfuly Submiting Data</p>\r\n   <div className={classes.actions}>\r\n        <button  onClick={ctx.onHideCart}\r\n         className={classes.button}>\r\n          Close\r\n        </button>\r\n  </div>\r\n</Fragment>\r\n\r\n  return (\r\n    <Modal>\r\n      {modalFormContent}\r\n      {modalLoadingSubmit}\r\n      {modalSubmit}\r\n\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default Cart"],"mappings":"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"},"metadata":{},"sourceType":"module"}