{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { async } from '@firebase/util';\nimport { createUserWithEmailAndPassword, onAuthStateChanged, signInWithEmailAndPassword, signOut } from 'firebase/auth';\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { auth } from '../../firebase/firebase';\n\nconst useAuth = () => {\n  _s();\n\n  const [user, setUser] = useState();\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const navigate = useNavigate();\n\n  const userAuthHandler = async (userHandler, email, password, navigate) => {\n    setError(null);\n    setIsLoading(true);\n\n    try {\n      await userHandler(auth, email, password);\n      navigate('/');\n    } catch (error) {\n      setError(error.message);\n    }\n\n    setIsLoading(false);\n  };\n\n  const signUp = async (email, password, name) => {\n    try {\n      await createUserWithEmailAndPassword(auth, email, password, name);\n      navigate('/login');\n    } catch (error) {\n      setError(error.meaasge);\n      alert(error.message);\n      navigate('/register');\n    }\n  };\n\n  const signIn = async (email, password) => {\n    try {\n      await signInWithEmailAndPassword(auth, email, password);\n      navigate('/'); // setIsLogin(false);\n    } catch (error) {\n      alert(error.message); // setIsLogin(false);  \n    }\n  };\n\n  const logOut = async () => {\n    try {\n      await signOut(auth);\n      navigate('/login');\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  useEffect(() => {\n    const unsubscrib = onAuthStateChanged(auth, user => {\n      if (user) {\n        setUser(user);\n      } else {\n        setUser(null);\n      }\n    });\n    return unsubscrib;\n  }, []);\n  return {\n    user,\n    error,\n    isLoading,\n    signUp,\n    signIn,\n    logOut,\n    userAuthHandler\n  };\n};\n\n_s(useAuth, \"PIzYPt1B+9HBZEg0Vzv5RI6ghhc=\", false, function () {\n  return [useNavigate];\n});\n\nexport default useAuth;","map":{"version":3,"names":["async","createUserWithEmailAndPassword","onAuthStateChanged","signInWithEmailAndPassword","signOut","React","useEffect","useState","useNavigate","auth","useAuth","user","setUser","error","setError","isLoading","setIsLoading","navigate","userAuthHandler","userHandler","email","password","message","signUp","name","meaasge","alert","signIn","logOut","unsubscrib"],"sources":["X:/kalBanan/udemy/projects/e_commerce/Ecommerce/src/component/hooks/use-auth.js"],"sourcesContent":["import { async } from '@firebase/util';\r\nimport { createUserWithEmailAndPassword, onAuthStateChanged, signInWithEmailAndPassword, signOut } from 'firebase/auth';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {auth} from '../../firebase/firebase';\r\n\r\n \r\n\r\n const useAuth =() => {\r\n\r\n   const [user, setUser] = useState();\r\n   const [error, setError] = useState(null);\r\n   const [isLoading, setIsLoading] = useState(true);\r\n\r\n   const navigate = useNavigate();\r\n\r\n  const userAuthHandler= async (userHandler,email, password,navigate )   => {\r\n\r\n      setError(null);\r\n      setIsLoading(true);\r\n\r\n      try { \r\n       await userHandler(auth,email, password );\r\n       navigate('/');\r\n\r\n    } catch(error) {\r\n        setError(error.message)\r\n       }\r\n       setIsLoading(false);\r\n   }\r\n   \r\n   const signUp = async(email, password, name) => {\r\n      try{ \r\n        await createUserWithEmailAndPassword(auth, email, password, name);\r\n        navigate('/login')\r\n\r\n       }   catch(error)  {  \r\n        setError(error.meaasge) \r\n        alert(error.message)\r\n        navigate('/register')    \r\n      }\r\n  }\r\n\r\n  const signIn= async(email, password) => {\r\n\r\n    try { \r\n\r\n      await signInWithEmailAndPassword(auth, email, password);\r\n      navigate('/')\r\n      // setIsLogin(false);\r\n\r\n     }  catch(error) {  \r\n        alert(error.message)   \r\n      // setIsLogin(false);  \r\n    }\r\n\r\n}\r\n\r\n const logOut= async() => {\r\n\r\n  try { \r\n\r\n        await signOut(auth) \r\n        navigate('/login') \r\n\r\n       }  catch(error)   {   setError(error.message)  }\r\n\r\n } \r\n\r\n useEffect( () => {\r\n\r\n  const unsubscrib = onAuthStateChanged(auth, (user) => {\r\n\r\n    if (user) { setUser(user);  }\r\n\r\n    else { setUser(null) }\r\n\r\n  })\r\n\r\n  return unsubscrib;\r\n\r\n }, []);\r\n\r\n\r\n  return { \r\n    user, error,isLoading, signUp, signIn, logOut, userAuthHandler }\r\n}\r\n\r\nexport default useAuth;\r\n"],"mappings":";;AAAA,SAASA,KAAT,QAAsB,gBAAtB;AACA,SAASC,8BAAT,EAAyCC,kBAAzC,EAA6DC,0BAA7D,EAAyFC,OAAzF,QAAwG,eAAxG;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAAQC,IAAR,QAAmB,yBAAnB;;AAIC,MAAMC,OAAO,GAAE,MAAM;EAAA;;EAEnB,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBL,QAAQ,EAAhC;EACA,MAAM,CAACM,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,IAAD,CAAlC;EACA,MAAM,CAACQ,SAAD,EAAYC,YAAZ,IAA4BT,QAAQ,CAAC,IAAD,CAA1C;EAEA,MAAMU,QAAQ,GAAGT,WAAW,EAA5B;;EAED,MAAMU,eAAe,GAAE,OAAOC,WAAP,EAAmBC,KAAnB,EAA0BC,QAA1B,EAAmCJ,QAAnC,KAAmD;IAEtEH,QAAQ,CAAC,IAAD,CAAR;IACAE,YAAY,CAAC,IAAD,CAAZ;;IAEA,IAAI;MACH,MAAMG,WAAW,CAACV,IAAD,EAAMW,KAAN,EAAaC,QAAb,CAAjB;MACAJ,QAAQ,CAAC,GAAD,CAAR;IAEF,CAJC,CAIA,OAAMJ,KAAN,EAAa;MACXC,QAAQ,CAACD,KAAK,CAACS,OAAP,CAAR;IACA;;IACDN,YAAY,CAAC,KAAD,CAAZ;EACH,CAbF;;EAeC,MAAMO,MAAM,GAAG,OAAMH,KAAN,EAAaC,QAAb,EAAuBG,IAAvB,KAAgC;IAC5C,IAAG;MACD,MAAMvB,8BAA8B,CAACQ,IAAD,EAAOW,KAAP,EAAcC,QAAd,EAAwBG,IAAxB,CAApC;MACAP,QAAQ,CAAC,QAAD,CAAR;IAEA,CAJF,CAIK,OAAMJ,KAAN,EAAc;MACjBC,QAAQ,CAACD,KAAK,CAACY,OAAP,CAAR;MACAC,KAAK,CAACb,KAAK,CAACS,OAAP,CAAL;MACAL,QAAQ,CAAC,WAAD,CAAR;IACD;EACJ,CAVA;;EAYD,MAAMU,MAAM,GAAE,OAAMP,KAAN,EAAaC,QAAb,KAA0B;IAEtC,IAAI;MAEF,MAAMlB,0BAA0B,CAACM,IAAD,EAAOW,KAAP,EAAcC,QAAd,CAAhC;MACAJ,QAAQ,CAAC,GAAD,CAAR,CAHE,CAIF;IAEA,CANF,CAMI,OAAMJ,KAAN,EAAa;MACba,KAAK,CAACb,KAAK,CAACS,OAAP,CAAL,CADa,CAEf;IACD;EAEJ,CAbC;;EAeD,MAAMM,MAAM,GAAE,YAAW;IAExB,IAAI;MAEE,MAAMxB,OAAO,CAACK,IAAD,CAAb;MACAQ,QAAQ,CAAC,QAAD,CAAR;IAEA,CALN,CAKQ,OAAMJ,KAAN,EAAe;MAAIC,QAAQ,CAACD,KAAK,CAACS,OAAP,CAAR;IAA0B;EAErD,CATD;;EAWAhB,SAAS,CAAE,MAAM;IAEhB,MAAMuB,UAAU,GAAG3B,kBAAkB,CAACO,IAAD,EAAQE,IAAD,IAAU;MAEpD,IAAIA,IAAJ,EAAU;QAAEC,OAAO,CAACD,IAAD,CAAP;MAAiB,CAA7B,MAEK;QAAEC,OAAO,CAAC,IAAD,CAAP;MAAe;IAEvB,CANoC,CAArC;IAQA,OAAOiB,UAAP;EAEA,CAZQ,EAYN,EAZM,CAAT;EAeC,OAAO;IACLlB,IADK;IACCE,KADD;IACOE,SADP;IACkBQ,MADlB;IAC0BI,MAD1B;IACkCC,MADlC;IAC0CV;EAD1C,CAAP;AAED,CA9EA;;GAAMR,O;UAMaF,W;;;AA0EpB,eAAeE,OAAf"},"metadata":{},"sourceType":"module"}