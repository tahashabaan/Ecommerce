{"ast":null,"code":"import _regeneratorRuntime from\"X:/kalBanan/udemy/projects/e_commerce/Ecommerce/src/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"X:/kalBanan/udemy/projects/e_commerce/Ecommerce/src/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"X:/kalBanan/udemy/projects/e_commerce/Ecommerce/src/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from'react';import{CardElement,PaymentElement,useElements,useStripe}from'@stripe/react-stripe-js';import Modal from'../UI/Modal/Modal';import{useNavigate}from'react-router-dom';import classes from'./CheckOut.module.css';import CartContext from'../../store/cart-context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CheckOut=function CheckOut(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),backend=_useState2[0],setBackend=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),cardElement=_useState4[0],setCardElement=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),secertKey=_useState6[0],setSecertKey=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),sucessed=_useState8[0],setSucessed=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),disable=_useState10[0],setDisable=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),loading=_useState14[0],setLoading=_useState14[1];var stripe=useStripe();var elements=useElements();var navigate=useNavigate();var _useContext=useContext(CartContext),totalAmount=_useContext.totalAmount;// useEffect(() => {\n//   const getClientSecret = async () => {\n//    const response = await axios.post({\n// method:'post',\n//       url:`/payment/create? amount=${totalAmount * 100}`,\n//     })\n//     setSecertKey(response.data.clientSecret);\n//     return response;\n//   }\n//   getClientSecret();\n// }, [totalAmount])\nvar submitHandle=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);setBackend(true);e.preventDefault();case 3:case\"end\":return _context.stop();}}},_callee);}));return function submitHandle(_x){return _ref.apply(this,arguments);};}();var changeHandle=function changeHandle(e){};//   const payload = await stripe.confirmCardPayment(secertKey,{\n//         payment_method:{\n//          card:elements.getElement(CardElement)\n//        }\n//   }).then((paymentIntent ) => {\n//      setSucessed(true);\n//      setLoading(false);\n//      setError(null);\n//      navigate('/cart', {replace:true})\n//   })\n// }\n// const changeHandle = (e) => {\n//   setDisable(false);\n//   setError(error? error.message :'');\n// setCardElement(e.target.value);\n// console.log(cardElement);\nreturn/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandle,className:classes.form,children:[/*#__PURE__*/_jsx(CardElement,{onChange:changeHandle,className:classes.cardElement}),/*#__PURE__*/_jsx(\"button\",{disabled:backend,children:loading?\"laoding...\":\"BuyNow\"}),error&&/*#__PURE__*/_jsx(\"p\",{children:error}),backend&&/*#__PURE__*/_jsxs(Modal,{children:[/*#__PURE__*/_jsx(\"p\",{className:classes.back,children:\"\\u062C\\u0627\\u0631\\u064A \\u062A\\u0646\\u0641\\u064A\\u0630 \\u0627\\u0644\\u0628\\u0627\\u0643 \\u0627\\u0646\\u062F \\u0633\\u064A\\u062A\\u0645 \\u062A\\u0634\\u063A\\u0644\\u064A\\u0647 \\u0641\\u064A \\u0627\\u0642\\u0631\\u0628 \\u0648\\u0642\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setBackend(false);},children:\"ok\"})]})]});};export default CheckOut;","map":{"version":3,"names":["React","useState","useEffect","useContext","CardElement","PaymentElement","useElements","useStripe","Modal","useNavigate","classes","CartContext","CheckOut","props","backend","setBackend","cardElement","setCardElement","secertKey","setSecertKey","sucessed","setSucessed","disable","setDisable","error","setError","loading","setLoading","stripe","elements","navigate","totalAmount","submitHandle","e","preventDefault","changeHandle","form","back"],"sources":["X:/kalBanan/udemy/projects/e_commerce/Ecommerce/src/src/component/CartProduct/CheckOut.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\r\nimport { CardElement, PaymentElement, useElements, useStripe} from '@stripe/react-stripe-js';\r\nimport Modal from '../UI/Modal/Modal'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport classes from './CheckOut.module.css'\r\nimport CartContext from '../../store/cart-context';\r\n\r\n\r\nconst CheckOut = (props) => { \r\n\r\n  const [backend, setBackend] = useState(false);\r\n  \r\n  const [cardElement, setCardElement] = useState(null);\r\n  const [secertKey, setSecertKey] = useState(null);\r\n  const [sucessed, setSucessed ] = useState(false);\r\n  const [disable, setDisable] = useState(true);\r\n  const [error, setError ] = useState(null);\r\n  const [loading, setLoading ] = useState(false);\r\n  \r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const navigate =  useNavigate();\r\n  \r\n  const {totalAmount} = useContext(CartContext)\r\n  \r\n\r\n\r\n  // useEffect(() => {\r\n  //   const getClientSecret = async () => {\r\n\r\n  //    const response = await axios.post({\r\n        // method:'post',\r\n  //       url:`/payment/create? amount=${totalAmount * 100}`,\r\n  //     })\r\n\r\n  //     setSecertKey(response.data.clientSecret);\r\n  //     return response;\r\n  //   }\r\n  //   getClientSecret();\r\n  \r\n  // }, [totalAmount])\r\n  \r\n  const submitHandle = async (e) => {\r\n\r\n    setLoading(true);\r\n    setBackend(true);\r\n    e.preventDefault();  \r\n\r\n  }\r\n\r\n  const changeHandle = (e) => {\r\n\r\n  }\r\n\r\n  //   const payload = await stripe.confirmCardPayment(secertKey,{\r\n  //         payment_method:{\r\n  //          card:elements.getElement(CardElement)\r\n  //        }\r\n  //   }).then((paymentIntent ) => {\r\n  //      setSucessed(true);\r\n  //      setLoading(false);\r\n  //      setError(null);\r\n  //      navigate('/cart', {replace:true})\r\n\r\n  //   })\r\n  // }\r\n\r\n  // const changeHandle = (e) => {\r\n  //   setDisable(false);\r\n  //   setError(error? error.message :'');\r\n\r\n    // setCardElement(e.target.value);\r\n    // console.log(cardElement);\r\n \r\n\r\n  \r\n\r\n  \r\n  return (\r\n  \r\n      <form onSubmit={submitHandle} className={classes.form}>\r\n       \r\n        <CardElement onChange={changeHandle} className={classes.cardElement}/>\r\n      \r\n        <button disabled={backend}>\r\n           {loading? \"laoding...\":\"BuyNow\"}\r\n        </button>\r\n\r\n        {error && <p>{error}</p>}\r\n        {backend && <Modal> \r\n        <p className={classes.back}>جاري تنفيذ الباك اند سيتم تشغليه في اقرب وقت</p>\r\n          <button onClick={() => setBackend(false)}>ok</button>\r\n         </Modal>}\r\n       </form>\r\n   \r\n  )\r\n}\r\n\r\nexport default CheckOut"],"mappings":"2aAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,OAASC,WAAT,CAAsBC,cAAtB,CAAsCC,WAAtC,CAAmDC,SAAnD,KAAmE,yBAAnE,CACA,MAAOC,MAAP,KAAkB,mBAAlB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,QAAP,KAAoB,uBAApB,CACA,MAAOC,YAAP,KAAwB,0BAAxB,C,wFAGA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,CAACC,KAAD,CAAW,CAE1B,cAA8BZ,QAAQ,CAAC,KAAD,CAAtC,wCAAOa,OAAP,eAAgBC,UAAhB,eAEA,eAAsCd,QAAQ,CAAC,IAAD,CAA9C,yCAAOe,WAAP,eAAoBC,cAApB,eACA,eAAkChB,QAAQ,CAAC,IAAD,CAA1C,yCAAOiB,SAAP,eAAkBC,YAAlB,eACA,eAAiClB,QAAQ,CAAC,KAAD,CAAzC,yCAAOmB,QAAP,eAAiBC,WAAjB,eACA,eAA8BpB,QAAQ,CAAC,IAAD,CAAtC,0CAAOqB,OAAP,gBAAgBC,UAAhB,gBACA,gBAA2BtB,QAAQ,CAAC,IAAD,CAAnC,2CAAOuB,KAAP,gBAAcC,QAAd,gBACA,gBAA+BxB,QAAQ,CAAC,KAAD,CAAvC,2CAAOyB,OAAP,gBAAgBC,UAAhB,gBAEA,GAAMC,OAAM,CAAGrB,SAAS,EAAxB,CACA,GAAMsB,SAAQ,CAAGvB,WAAW,EAA5B,CACA,GAAMwB,SAAQ,CAAIrB,WAAW,EAA7B,CAEA,gBAAsBN,UAAU,CAACQ,WAAD,CAAhC,CAAOoB,WAAP,aAAOA,WAAP,CAIA;AACA;AAEA;AACM;AACN;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA,GAAMC,aAAY,4FAAG,iBAAOC,CAAP,oHAEnBN,UAAU,CAAC,IAAD,CAAV,CACAZ,UAAU,CAAC,IAAD,CAAV,CACAkB,CAAC,CAACC,cAAF,GAJmB,sDAAH,kBAAZF,aAAY,4CAAlB,CAQA,GAAMG,aAAY,CAAG,QAAfA,aAAe,CAACF,CAAD,CAAO,CAE3B,CAFD,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEE;AACA;AAMF,mBAEI,cAAM,QAAQ,CAAED,YAAhB,CAA8B,SAAS,CAAEtB,OAAO,CAAC0B,IAAjD,wBAEE,KAAC,WAAD,EAAa,QAAQ,CAAED,YAAvB,CAAqC,SAAS,CAAEzB,OAAO,CAACM,WAAxD,EAFF,cAIE,eAAQ,QAAQ,CAAEF,OAAlB,UACIY,OAAO,CAAE,YAAF,CAAe,QAD1B,EAJF,CAQGF,KAAK,eAAI,mBAAIA,KAAJ,EARZ,CASGV,OAAO,eAAI,MAAC,KAAD,yBACZ,UAAG,SAAS,CAAEJ,OAAO,CAAC2B,IAAtB,8OADY,cAEV,eAAQ,OAAO,CAAE,yBAAMtB,WAAU,CAAC,KAAD,CAAhB,EAAjB,gBAFU,GATd,GAFJ,CAkBD,CAxFD,CA0FA,cAAeH,SAAf"},"metadata":{},"sourceType":"module"}