{"ast":null,"code":"import _slicedToArray from\"X:/kalBanan/udemy/projects/e_commerce/Ecommerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"X:/kalBanan/udemy/projects/e_commerce/Ecommerce/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"X:/kalBanan/udemy/projects/e_commerce/Ecommerce/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect,useReducer}from\"react\";import useCart from\"../component/hooks/use-cart\";import CartContext from'./cart-context';import{jsx as _jsx}from\"react/jsx-runtime\";var intialProduct={products:[],totalAmount:0};var productReducer=function productReducer(state,action){if(action.type==='Add'){var updatesTotalAmount=state.totalAmount+action.payload.quantity*action.payload.price;var existingProductIndex=state.products.findIndex(function(product){return product.id===action.payload.id;});var existingProduct=state.products[existingProductIndex];var updateProducts;if(existingProduct){var updateProduct=_objectSpread(_objectSpread({},existingProduct),{},{quantity:action.payload.quantity});updateProducts=_toConsumableArray(state.products);updateProducts[existingProductIndex]=updateProduct;updatesTotalAmount=state.totalAmount-existingProduct.quantity*existingProduct.price+action.payload.quantity*action.payload.price;}else{updateProducts=state.products.concat(action.payload);}return{products:updateProducts,totalAmount:updatesTotalAmount};}if(action.type==='Remove'){var _existingProduct=state.products.find(function(product){return product.id===action.id;});var _updateProducts;var updateTotalAmount;if(_existingProduct){_updateProducts=state.products.filter(function(product){return product.id!==action.id;});updateTotalAmount=state.totalAmount-_existingProduct.price*_existingProduct.quantity;}else{_updateProducts=_toConsumableArray(state.products);}return{products:_updateProducts,totalAmount:updateTotalAmount};}return{intialProduct:intialProduct};};var CartProvider=function CartProvider(props){var _useReducer=useReducer(productReducer,intialProduct),_useReducer2=_slicedToArray(_useReducer,2),stateProduct=_useReducer2[0],dispatchProduct=_useReducer2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showCart=_useState2[0],setShowCart=_useState2[1];var url=\"https://dummyjson.com/products\";var _useCart=useCart({url:url}),reqData=_useCart.reqData,items=_useCart.items,loading=_useCart.loading,error=_useCart.error;useEffect(function(){reqData();},[]);// const [items, setItems] = useState({\n//   products:[],\n//   total:0,\n//   skip:2,\n//   limit:40,\n// });\n// const fetchData = async () => {\n//  const response = await fetch('https://dummyjson.com/products');\n//  const data = await response.json();\n//  setItems(data);\n// }\n// useEffect(() => {\n//   fetchData();\n// },[])\nvar AddProductHandler=function AddProductHandler(payload){dispatchProduct({type:'Add',payload:payload});};var updateCartHandler=function updateCartHandler(payload){dispatchProduct({type:'updateCart',payload:payload});};var removeProductHandler=function removeProductHandler(id){dispatchProduct({type:'Remove',id:id});};var showCartHandler=function showCartHandler(){setShowCart(true);};var hideCartHandler=function hideCartHandler(){setShowCart(false);};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{items:items,products:stateProduct.products,totalAmount:stateProduct.totalAmount,showCart:showCart,error:error,loading:loading,onShowCart:showCartHandler,onHideCart:hideCartHandler,onAddProduct:AddProductHandler,onUpdateCart:updateCartHandler,onRemoveProduct:removeProductHandler},children:props.children});};export default CartProvider;","map":{"version":3,"names":["useState","useEffect","useReducer","useCart","CartContext","intialProduct","products","totalAmount","productReducer","state","action","type","updatesTotalAmount","payload","quantity","price","existingProductIndex","findIndex","product","id","existingProduct","updateProducts","updateProduct","concat","find","updateTotalAmount","filter","CartProvider","props","stateProduct","dispatchProduct","showCart","setShowCart","url","reqData","items","loading","error","AddProductHandler","updateCartHandler","removeProductHandler","showCartHandler","hideCartHandler","onShowCart","onHideCart","onAddProduct","onUpdateCart","onRemoveProduct","children"],"sources":["X:/kalBanan/udemy/projects/e_commerce/Ecommerce/src/store/CartProvider.js"],"sourcesContent":["import { useState, useEffect, useReducer } from \"react\";\r\nimport useCart from \"../component/hooks/use-cart\";\r\nimport CartContext from './cart-context';\r\n\r\n const intialProduct ={\r\n   products:[],\r\n   totalAmount:0\r\n}\r\n\r\nconst productReducer = (state, action) => {\r\n\r\n  if (action.type === 'Add') {\r\n\r\n    let updatesTotalAmount = state.totalAmount + action.payload.quantity * action.payload.price;\r\n\r\n    const existingProductIndex = state.products.findIndex(\r\n      product => product.id === action.payload.id)\r\n    const existingProduct = state.products[existingProductIndex];\r\n\r\n    let updateProducts;\r\n    if (existingProduct) {\r\n      let updateProduct = {\r\n        ...existingProduct,\r\n        quantity: action.payload.quantity\r\n      }\r\n\r\n     updateProducts = [...state.products];\r\n     updateProducts [existingProductIndex] = updateProduct; \r\n      \r\n\r\n        updatesTotalAmount = (state.totalAmount - existingProduct.quantity * existingProduct.price) + action.payload.quantity * action.payload.price;\r\n    \r\n    }\r\n\r\n    else { \r\n      updateProducts = state.products.concat(action.payload); }\r\n    return {\r\n      products: updateProducts,\r\n      totalAmount: updatesTotalAmount\r\n    }\r\n  }\r\n\r\n\r\n  if (action.type === 'Remove') {\r\n\r\n     const existingProduct = state.products.find(product => product.id === action.id);\r\n     \r\n\r\n    let updateProducts;\r\n    let updateTotalAmount;\r\n    if (existingProduct) {\r\n        updateProducts = state.products.filter( product => \r\n              product.id !== action.id ) \r\n       updateTotalAmount = state.totalAmount - existingProduct.price * existingProduct.quantity;  }\r\n\r\n      else {updateProducts = [...state.products]}\r\n    \r\n      return {\r\n        products:updateProducts,\r\n        totalAmount:updateTotalAmount\r\n      }\r\n  }\r\n\r\n  return {intialProduct}\r\n\r\n}\r\n\r\nconst CartProvider = (props) => {\r\n\r\n  const [stateProduct, dispatchProduct] = useReducer(productReducer, intialProduct);\r\n  const [showCart, setShowCart] = useState(false);\r\n\r\n  const url = `https://dummyjson.com/products`;\r\n  const {reqData, items, loading, error} = useCart({url});\r\n\r\n   useEffect(() => {\r\n    reqData();\r\n  },[]);\r\n\r\n\r\n  // const [items, setItems] = useState({\r\n  //   products:[],\r\n  //   total:0,\r\n  //   skip:2,\r\n  //   limit:40,\r\n  // });\r\n  \r\n  // const fetchData = async () => {\r\n  //  const response = await fetch('https://dummyjson.com/products');\r\n  //  const data = await response.json();\r\n  //  setItems(data);\r\n  // }\r\n\r\n  // useEffect(() => {\r\n  //   fetchData();\r\n  // },[])\r\n\r\n  const AddProductHandler = (payload) => {\r\n    dispatchProduct({type:'Add',payload})\r\n  }\r\n\r\n  const updateCartHandler = (payload) => {\r\n    dispatchProduct({type:'updateCart', payload})\r\n  }\r\n\r\n  const removeProductHandler = (id) => {\r\n    dispatchProduct({type:'Remove', id})\r\n  }\r\n\r\n  const showCartHandler = () => {  setShowCart(true);  }\r\n\r\n  const hideCartHandler = () => {  setShowCart(false);  }\r\n\r\n  return (\r\n   <CartContext.Provider value={{\r\n    items,\r\n    products:stateProduct.products,\r\n    totalAmount:stateProduct.totalAmount,\r\n    showCart,\r\n    error,\r\n    loading,\r\n    onShowCart:showCartHandler,\r\n    onHideCart:hideCartHandler,\r\n    onAddProduct:AddProductHandler,\r\n    onUpdateCart:updateCartHandler,\r\n    onRemoveProduct:removeProductHandler\r\n    }}>\r\n         {props.children}\r\n   </CartContext.Provider>)\r\n}\r\n\r\nexport default CartProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module"}