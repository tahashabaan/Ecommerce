{"ast":null,"code":"import _slicedToArray from\"X:/kalBanan/udemy/react-max/section-11  project__order-food/ORDER__FOOD__PROJECT/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"X:/kalBanan/udemy/react-max/section-11  project__order-food/ORDER__FOOD__PROJECT/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"X:/kalBanan/udemy/react-max/section-11  project__order-food/ORDER__FOOD__PROJECT/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useReducer}from'react';import CartContext from'./cart-context';import{jsx as _jsx}from\"react/jsx-runtime\";var cartValue={items:[],totalAmount:0};var cartReducer=function cartReducer(state,action){if(action.type==='ADD'){var updataTotalAmount=state.totalAmount+action.item.price*action.item.amount;var existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.item.id;});var existingCartItem=state.items[existingCartItemIndex];var updateItems;if(existingCartItem){var updateItem=_objectSpread(_objectSpread({},existingCartItem),{},{amount:existingCartItem.amount+action.item.amount});updateItems=_toConsumableArray(state.items);updateItems[existingCartItemIndex]=updateItem;}else{updateItems=state.items.concat(action.item);}return{items:updateItems,totalAmount:updataTotalAmount};}if(action.type==='REMOVE'){var _existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.id;});var _existingCartItem=state.items[_existingCartItemIndex];var _updataTotalAmount=state.totalAmount-_existingCartItem.price;var _updateItems;if(_existingCartItem.amount===1){_updateItems=state.items.filter(function(item){return item.id!==action.id;});}else{var _updateItem=_objectSpread(_objectSpread({},_existingCartItem),{},{amount:_existingCartItem.amount-1});_updateItems=_toConsumableArray(state.items);_updateItems[_existingCartItemIndex]=_updateItem;}return{totalAmount:_updataTotalAmount,items:_updateItems};}return{cartValue:cartValue};};var CartProvider=function CartProvider(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showCart=_useState2[0],setShowCart=_useState2[1];var _useReducer=useReducer(cartReducer,cartValue),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],dispatchCart=_useReducer2[1];var addItemToCartHandler=function addItemToCartHandler(items){dispatchCart({type:'ADD',item:items});};var removeItemToCartHandler=function removeItemToCartHandler(id){dispatchCart({type:'REMOVE',id:id});};var onShowCartHandler=function onShowCartHandler(){setShowCart(true);};var onHideCartHandler=function onHideCartHandler(){setShowCart(false);};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cartItem:cartState.items,totalAmount:cartState.totalAmount,showCart:showCart,onAddItem:addItemToCartHandler,onRemoveItem:removeItemToCartHandler,onShowCart:onShowCartHandler,onHideCart:onHideCartHandler},children:props.children});};export default CartProvider;","map":{"version":3,"names":["useState","useReducer","CartContext","cartValue","items","totalAmount","cartReducer","state","action","type","updataTotalAmount","item","price","amount","existingCartItemIndex","findIndex","id","existingCartItem","updateItems","updateItem","concat","filter","CartProvider","props","showCart","setShowCart","cartState","dispatchCart","addItemToCartHandler","removeItemToCartHandler","onShowCartHandler","onHideCartHandler","cartItem","onAddItem","onRemoveItem","onShowCart","onHideCart","children"],"sources":["X:/kalBanan/udemy/react-max/section-11  project__order-food/ORDER__FOOD__PROJECT/src/store/CartProvider.js"],"sourcesContent":["import {useState, useReducer} from 'react';\r\nimport CartContext from './cart-context';\r\n\r\nconst cartValue = {\r\n  items:[],\r\n  totalAmount:0\r\n}\r\n\r\nconst cartReducer = ( state, action ) => {\r\n\r\n  if ( action.type === 'ADD' ) {\r\n    const updataTotalAmount = state.totalAmount + action.item.price * action.item.amount;\r\n   \r\n    const existingCartItemIndex = state.items.findIndex( item => item.id === action.item.id )\r\n    const existingCartItem = state.items[existingCartItemIndex]\r\n\r\n    let updateItems;\r\n\r\n    if(existingCartItem){\r\n\r\n      const updateItem ={\r\n        ...existingCartItem,\r\n        amount: existingCartItem.amount + action.item.amount\r\n      }\r\n      updateItems = [...state.items];\r\n      updateItems[existingCartItemIndex] = updateItem\r\n    } \r\n    else{\r\n      updateItems = state.items.concat(action.item)\r\n    }\r\n\r\n  return {\r\n    items: updateItems,\r\n    totalAmount: updataTotalAmount\r\n  };\r\n\r\n  }\r\n  \r\n  if ( action.type === 'REMOVE' ) {\r\n\r\n    const existingCartItemIndex = state.items.findIndex(item => item.id === action.id)\r\n\r\n    const existingCartItem = state.items[existingCartItemIndex];\r\n\r\n    const updataTotalAmount = state.totalAmount - existingCartItem.price ;\r\n\r\n    let updateItems;\r\n    if ( existingCartItem.amount === 1 ) {\r\n      updateItems = state.items.filter( item => item.id !== action.id )\r\n    }\r\n\r\n    else{\r\n\r\n      const updateItem = {\r\n        ...existingCartItem,\r\n        amount:existingCartItem.amount-1\r\n      }\r\n\r\n      updateItems = [...state.items];\r\n      updateItems[existingCartItemIndex] = updateItem\r\n    }\r\n\r\n    return {\r\n      totalAmount:updataTotalAmount,\r\n      items:updateItems\r\n    }\r\n  }\r\n\r\n  return {cartValue}\r\n}\r\nconst CartProvider = (props) => {\r\n  \r\n   const [showCart, setShowCart] = useState(false);\r\n \r\n   const [cartState, dispatchCart] = useReducer(cartReducer, cartValue)\r\n \r\n   const addItemToCartHandler = (items) => {\r\n     dispatchCart({type:'ADD', item:items});\r\n  }\r\n  \r\n  const removeItemToCartHandler = (id) => {\r\n     dispatchCart({type: 'REMOVE', id:id})\r\n }\r\n \r\n  const onShowCartHandler = () => {\r\n    setShowCart(true)\r\n  }\r\n \r\n  const onHideCartHandler = () => {\r\n    setShowCart(false)\r\n  }\r\n \r\n  return <CartContext.Provider value={{\r\n   cartItem: cartState.items,\r\n   totalAmount: cartState.totalAmount,\r\n   showCart: showCart,\r\n   onAddItem: addItemToCartHandler,\r\n   onRemoveItem: removeItemToCartHandler,\r\n   onShowCart: onShowCartHandler,\r\n   onHideCart: onHideCartHandler,\r\n  }}>\r\n   {props.children}\r\n  </CartContext.Provider>\r\n }\r\n \r\nexport default CartProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module"}