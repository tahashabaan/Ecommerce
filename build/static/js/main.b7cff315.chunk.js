(this.webpackJsonpECommerce=this.webpackJsonpECommerce||[]).push([[0],{20:function(e,t,n){e.exports={modal:"NavCart_modal__25kbd",navBar:"NavCart_navBar__2uXd8",cart:"NavCart_cart__2emRK",button:"NavCart_button__2FkcX",icon:"NavCart_icon__19fFb",badge:"NavCart_badge__2sRPH",nav:"NavCart_nav__2zhTY"}},27:function(e,t,n){e.exports={login:"Login_login__1VzfQ",register:"Login_register__DDBST",btn:"Login_btn__1F9nm",link:"Login_link__VGy-G"}},31:function(e,t,n){e.exports={wrapper:"ProductItemDetails_wrapper__3bgLG",imgs:"ProductItemDetails_imgs__1g70A",left:"ProductItemDetails_left__1ochD",right:"ProductItemDetails_right__1Azmu",disc:"ProductItemDetails_disc__3cFaN"}},32:function(e,t,n){e.exports={cartItem:"CartItem_cartItem__18mDY",wrapper:"CartItem_wrapper__Zr4eY",left:"CartItem_left__1aL4M"}},35:function(e,t,n){e.exports={head:"Header_head__VgUGP","main-image":"Header_main-image__3oz4u",navbar:"Header_navbar__3lOVd",icon_bar:"Header_icon_bar__i0tlP"}},39:function(e,t,n){e.exports={backdrop:"Modal_backdrop__35e6I",modal:"Modal_modal__2LtHC",slide_right:"Modal_slide_right__2Zlw4"}},40:function(e,t,n){e.exports={backdrop:"Modal_backdrop__1XUdG",modal:"Modal_modal__1jVXb","slide-down":"Modal_slide-down__3XwhH"}},41:function(e,t,n){e.exports={form:"CheckOut_form__3I8Vn",cardElement:"CheckOut_cardElement__DXxuT",backend:"CheckOut_backend__Q1Ful"}},43:function(e,t,n){e.exports={actions:"ProductItemForm_actions__zTeA2"}},44:function(e,t,n){e.exports={payment:"Payment_payment__1QEba",close:"Payment_close__3b4hY"}},45:function(e,t,n){e.exports={controls:"Input_controls__AfBhH",error:"Input_error__2TZGy"}},49:function(e,t,n){e.exports={card:"Card_card__1u3R4"}},50:function(e,t,n){e.exports={item:"ProductItem_item__2ewdk",transform:"ProductItem_transform__3kHat"}},51:function(e,t,n){e.exports={product:"Products_product__2Ai-1"}},52:function(e,t,n){e.exports={spinner:"Spinner_spinner__1Jlaq"}},54:function(e,t,n){e.exports={cart:"Cart_cart__2mFI2"}},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var c=n(47),r=n.n(c),a=n(4),s=n(15),o=n(11),l=n(10),i=n(19),u=n(33),d=Object(a.createContext)({items:{}}),j=n(1),b=n(3),O=n(48),m=Object(O.a)({apiKey:"AIzaSyDlria3Hgc0ac5mwZ5M59YBk5AE9d98G30",authDomain:"fire-auth-9d891.firebaseapp.com",projectId:"fire-auth-9d891",storageBucket:"fire-auth-9d891.appspot.com",messagingSenderId:"21174898242",appId:"1:21174898242:web:52d45dce8efaef35b5a7db"}),h=Object(i.b)(m),p=function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),s=Object(l.a)(r,2),u=s[0],d=s[1],O=Object(a.useState)(!0),m=Object(l.a)(O,2),p=m[0],x=m[1],f=Object(o.m)(),_=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t,n,c,r){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(null),x(!0),e.prev=2,e.next=5,t(h,n,c);case 5:f(r),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),d(e.t0.message),alert(e.t0.message);case 12:x(!1);case 13:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n,c,r){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=Object(i.c)(h,(function(e){c(e||null)}));return e}),[]),{user:n,error:u,isLoading:p,userAuthHandler:_}},x=n(20),f=n.n(x),_=n(5),g=function(){var e=Object(a.useContext)(d).products.reduce((function(e,t){return e+t.quantity}),0),t=Object(a.useContext)(d).onShowCart,n=p(),c=n.user,r=n.userAuthHandler;return Object(_.jsxs)("nav",{className:f.a.nav,children:[!c&&Object(_.jsxs)(s.b,{to:"/login",children:[" ",Object(_.jsx)("p",{children:" Login "})]}),!c&&Object(_.jsxs)(s.b,{to:"/register",children:[" ",Object(_.jsx)("p",{children:" Register  "}),"  "]}),c&&Object(_.jsx)("p",{onClick:function(){return r(i.e,null,null,"/login")},children:" Sign Out "}),c&&Object(_.jsxs)("p",{children:[" ",c.email,"  "]}),Object(_.jsx)(s.b,{to:"/cart",children:Object(_.jsxs)("button",{className:f.a.cart,onClick:t,children:[Object(_.jsx)(u.a,{className:f.a.icon}),Object(_.jsx)("span",{className:f.a.badge,children:e})]})})]})},v=n(26),C=n.n(v),N=n(39),y=n.n(N),k=function(){return Object(_.jsx)("div",{className:y.a.backdrop})},H=function(e){return Object(_.jsx)("div",{className:"".concat(y.a.modal,"  ").concat(e.className),children:Object(_.jsx)("div",{className:"".concat(y.a.content),children:e.children})})},w=document.getElementById("overlays"),S=function(e){return Object(_.jsxs)(a.Fragment,{children:[C.a.createPortal(Object(_.jsx)(k,{}),w),C.a.createPortal(Object(_.jsx)(H,{children:e.children}),w)]})},I=function(e){var t=Object(a.useContext)(d).products.reduce((function(e,t){return e+t.quantity}),0),n=Object(a.useContext)(d).onShowCart,c=p(),r=c.user,o=c.userAuthHandler;return Object(_.jsx)(S,{className:f.a.modal,children:Object(_.jsxs)("nav",{className:f.a.navBar,children:[!r&&Object(_.jsx)(s.b,{to:"/login",children:Object(_.jsx)("p",{onClick:e.closeMenu,children:" Login "})}),!r&&Object(_.jsx)(s.b,{to:"/register",children:Object(_.jsx)("p",{onClick:e.closeMenu,children:" Register  "})}),r&&Object(_.jsx)("p",{onClick:function(){o(i.e,null,null,"/login"),e.closeMenu()},children:" Sign Out "}),r&&Object(_.jsxs)("p",{children:[" ",r.email,"  "]}),Object(_.jsx)(s.b,{to:"/cart",children:Object(_.jsxs)("button",{className:f.a.cart,onClick:function(){n(),e.closeMenu()},children:[Object(_.jsx)(u.a,{className:f.a.icon}),Object(_.jsx)("span",{className:f.a.badge,children:t})]})})]})})},E=n(35),P=n.n(E),A=n(25),B=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],r=n[1],o=function(){r(!1)};return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("header",{className:P.a.head,children:[Object(_.jsx)(s.b,{to:"/",children:Object(_.jsx)("h3",{onClick:o,children:"Shoping Store"})}),Object(_.jsx)(g,{}),Object(_.jsxs)("div",{className:P.a.navbar,children:[!c&&Object(_.jsx)("button",{onClick:function(){r(!0)},children:Object(_.jsx)(A.a,{className:P.a.icon_bar})}),c&&Object(_.jsx)("button",{onClick:o,children:Object(_.jsx)(A.b,{className:P.a.icon_bar})})]}),c&&Object(_.jsx)(I,{closeMenu:o})]})})},R=n(49),D=n.n(R),F=function(e){return Object(_.jsx)("li",{className:"".concat(D.a.card," ").concat(e.className),children:e.children})},M=n(50),q=n.n(M),L=function(e){var t=e.product,n=t.id;return Object(_.jsx)(F,{className:q.a.item,children:Object(_.jsxs)(s.b,{to:"/".concat(n),children:[Object(_.jsx)("img",{src:t.thumbnail}),Object(_.jsx)("h4",{children:t.title}),Object(_.jsxs)("h5",{children:[t.price,"$"]}),Object(_.jsx)("span",{children:t.rating})]})})},V=n(51),U=n.n(V),T=n(52),X=n.n(T),z=function(){return Object(_.jsx)("div",{className:X.a.spinner})},G=function(e){var t=e.products,n=e.loading,c=e.error;console.log(t,n,c);Object(o.o)().id;var r=t.map((function(e){return Object(_.jsx)(L,{product:e},e.id)}));return n&&(r=Object(_.jsx)("p",{children:Object(_.jsx)(z,{})})),c&&(r=Object(_.jsx)("p",{children:"Something Went Wrong!"})),Object(_.jsx)("ul",{className:U.a.product,children:r})},Z=n(31),J=n.n(Z),Y=n(22),Q=n(43),W=n.n(Q),K=function(e){for(var t=Object(o.m)(),n=e.product,c=Object(a.useRef)(1),r=Object(a.useContext)(d).onAddProduct,s=p().user,l=[],i=1;i<n.stock;i++)l[i]=[i];return Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s?function(){var e=+c.current.value,t=Object(Y.a)(Object(Y.a)({},n),{},{quantity:e});r(t)}():t("/login")},children:[Object(_.jsxs)("div",{className:W.a.controls,children:[Object(_.jsx)("label",{htmlFor:"select",children:"Quantity"}),Object(_.jsx)("select",{id:"select",ref:c,defaultValue:n.quantity,children:l.map((function(e,t){return Object(_.jsx)("option",{value:e,children:e},t)}))})]}),Object(_.jsx)("div",{className:W.a.actions,children:Object(_.jsx)("button",{children:"Add to Cart"})})]})},$=function(e){var t=e.products,n=Object(a.useContext)(d),c=Object(a.useState)(0),r=Object(l.a)(c,2),s=r[0],i=r[1],u=Object(o.o)().productId;console.log(s);var j=t.find((function(e){return e.id==u}));return Object(_.jsxs)("div",{className:J.a.wrapper,children:[Object(_.jsx)("section",{className:J.a.imgs,children:j.images.map((function(e,t){return Object(_.jsx)("img",{src:e,onClick:function(){return i(t)}},t)}))}),Object(_.jsxs)("section",{className:J.a.desc,children:[Object(_.jsx)("section",{className:J.a.left,children:Object(_.jsx)("img",{src:j.images[s]})}),Object(_.jsxs)("section",{className:J.a.right,children:[Object(_.jsx)("h3",{children:j.title}),Object(_.jsxs)("h4",{children:[j.price,"$"]}),Object(_.jsx)("p",{children:j.description}),Object(_.jsx)(K,{product:j,onAddProduct:n.onAddProduct})]})]})]})},ee=n(53),te=n(32),ne=n.n(te),ce=function(e){var t=e.product;console.log(t);var n=Object(a.useContext)(d).onRemoveProduct,c=t.id;return Object(_.jsxs)("div",{className:ne.a.cartItem,children:[Object(_.jsx)("button",{className:ne.a.close,onClick:function(){n(c),console.log(c)},children:Object(_.jsx)(ee.a,{})}),Object(_.jsxs)("section",{className:ne.a.wrapper,children:[Object(_.jsx)("div",{className:ne.a.left,children:Object(_.jsx)("img",{src:t.images[0],alt:"Image"})}),Object(_.jsxs)("div",{className:ne.a.right,children:[Object(_.jsx)("h3",{children:t.title}),Object(_.jsx)("p",{children:t.description}),Object(_.jsx)(K,{product:t})]})]})]})},re=n(44),ae=n.n(re),se=function(){var e=Object(a.useContext)(d).totalAmount,t=Object(o.m)();return Object(_.jsxs)(F,{className:ae.a.payment,children:[Object(_.jsxs)("header",{children:["totalAmount: ",e,"$"]}),Object(_.jsxs)("footer",{children:[Object(_.jsx)("button",{className:ae.a.close,onClick:function(){t("/")},children:" Close "}),Object(_.jsx)("button",{onClick:function(){t("/checkout")},children:"Order"})]})]})},oe=n(54),le=n.n(oe),ie=function(e){var t=e.products;return Object(_.jsxs)("div",{className:le.a.cart,children:[Object(_.jsx)(se,{}),t.map((function(e){return Object(_.jsx)(ce,{product:e},e.id)}))]})},ue=n(45),de=n.n(ue),je=function(e){var t=e.label,n=e.id,c=e.type,r=e.placeholder,a=e.onChangeHandler,s=e.className,o=e.onBlurHandler,l=s?de.a.error:"";return Object(_.jsxs)("div",{className:"".concat(de.a.controls," ").concat(l),children:[Object(_.jsxs)("label",{htmlFor:n,children:[" ",t," "]}),Object(_.jsx)("input",{id:n,type:c,name:c,placeholder:r,onChange:a,onBlur:o})]})},be=n(27),Oe=n.n(be),me={value:"",touched:!1},he=function(e,t){return"INPUT_USER"===t.type?{value:t.value,touched:e.touched}:"BLUR"===t.type?{value:e.value,touched:!0}:"RESET"===t.type?{value:"",touched:!1}:void 0},pe=function(e){var t=Object(a.useReducer)(he,me),n=Object(l.a)(t,2),c=n[0],r=n[1],s=e(c.value),o=c.touched&&!s;return{inputVal:c.value,hasError:o,onChangeHandler:function(e){r({type:"INPUT_USER",value:e.target.value})},onBlurHandler:function(e){r({type:"BLUR"})},resetHandler:function(e){r({type:"RESET"})}}},xe=function(){var e=pe((function(e){return e.includes("@")})),t=e.inputVal,n=e.hasError,c=e.onChangeHandler,r=e.onBlurHandler,a=pe((function(e){return e.length>=6})),o=a.inputVal,l=a.hasError,u=a.onChangeHandler,d=a.onBlurHandler,j=p(),b=j.user,O=j.isLoading,m=j.error,h=j.userAuthHandler;console.log(O,m),console.log(b);return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(F,{className:Oe.a.login,children:Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h(i.d,t,o,"/")},children:[Object(_.jsx)(je,{label:"Email",type:"email",id:"email",placeholder:"enter email",onChangeHandler:c,className:n,onBlurHandler:r}),Object(_.jsx)(je,{label:"Password",type:"password",id:"password",placeholder:"enter password",onChangeHandler:u,onBlurHandler:d,className:l}),Object(_.jsx)("button",{className:Oe.a.btn,children:"Login"}),Object(_.jsx)(s.b,{to:"/register",className:Oe.a.link,children:" Sign Up "})]})})})},fe=function(){var e=p(),t=(e.user,e.error,e.userAuthHandler),n=pe((function(e){return e.length>=8})),c=(n.inputVal,n.hasError),r=n.onChangeHandler,a=n.onBlurHandler,o=n.resetHandler,l=pe((function(e){return e.includes("@")})),u=l.inputVal,d=l.hasError,j=l.onChangeHandler,b=l.onBlurHandler,O=l.resetHandler,m=pe((function(e){return e.length>=6})),h=m.inputVal,x=m.hasError,f=m.onChangeHandler,g=m.onBlurHandler,v=m.resetHandler;return Object(_.jsx)(F,{className:Oe.a.register,children:Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(i.a,u,h,"/login"),o(),O(),v()},children:[Object(_.jsx)(je,{label:"full Name",type:"text",id:"text",placeholder:"enter Full Name",onChangeHandler:r,onBlurHandler:a,className:c}),Object(_.jsx)(je,{label:"Email",type:"email",id:"email",placeholder:"enter email",onChangeHandler:j,onBlurHandler:b,className:d}),Object(_.jsx)(je,{label:"Password",type:"password",id:"password",placeholder:"enter password",onChangeHandler:f,onBlurHandler:g,className:x}),Object(_.jsx)("button",{className:Oe.a.btn,children:"Register"}),Object(_.jsx)(s.b,{to:"/login",children:" Sign In "})]})})},_e=n(40),ge=n.n(_e),ve=function(e){return Object(_.jsx)("div",{className:ge.a.backdrop})},Ce=function(e){return Object(_.jsx)("div",{className:"".concat(ge.a.modal," ").concat(e.className),children:Object(_.jsx)("div",{className:ge.a.content,children:e.children})})},Ne=document.getElementById("overlays"),ye=function(e){return Object(_.jsxs)(a.Fragment,{children:[C.a.createPortal(Object(_.jsx)(ve,{}),Ne),C.a.createPortal(Object(_.jsx)(Ce,{children:e.children}),Ne)]})},ke=n(30),He=n(41),we=n.n(He),Se=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(null),i=Object(l.a)(s,2),u=(i[0],i[1],Object(a.useState)(null)),O=Object(l.a)(u,2),m=(O[0],O[1],Object(a.useState)(!1)),h=Object(l.a)(m,2),p=(h[0],h[1],Object(a.useState)(!0)),x=Object(l.a)(p,2),f=(x[0],x[1],Object(a.useState)(null)),g=Object(l.a)(f,2),v=g[0],C=(g[1],Object(a.useState)(!1)),N=Object(l.a)(C,2),y=N[0],k=N[1],H=(Object(ke.useStripe)(),Object(ke.useElements)(),Object(o.m)(),Object(a.useContext)(d).totalAmount,function(){var e=Object(b.a)(Object(j.a)().mark((function e(t){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(!0),r(!0),t.preventDefault();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(_.jsxs)("form",{onSubmit:H,className:we.a.form,children:[Object(_.jsx)(ke.CardElement,{onChange:function(e){},className:we.a.cardElement}),Object(_.jsx)("button",{disabled:c,children:y?"laoding...":"BuyNow"}),v&&Object(_.jsx)("p",{children:v}),c&&Object(_.jsxs)(ye,{children:[Object(_.jsx)("p",{className:we.a.back,children:"\u062c\u0627\u0631\u064a \u062a\u0646\u0641\u064a\u0630 \u0627\u0644\u0628\u0627\u0643 \u0627\u0646\u062f \u0633\u064a\u062a\u0645 \u062a\u0634\u063a\u0644\u064a\u0647 \u0641\u064a \u0627\u0642\u0631\u0628 \u0648\u0642\u062a"}),Object(_.jsx)("button",{onClick:function(){return r(!1)},children:"ok"})]})]})},Ie=n(55),Ee=function(){var e=Object(a.useContext)(d),t=e.items,n=(e.showCart,e.products),c=e.error,r=e.loading,l=Object(Ie.a)("pk_test_51MHiC0DaMD3XgP50FUzXjtOflju8kfXBl5CCmKeXhnCWsim7JlIx6IEdg9wIlgzvyZw48eqRElcHSUdtEI8WgkZw003TfP27pE");return Object(_.jsxs)(s.a,{children:[Object(_.jsx)(B,{}),Object(_.jsxs)(o.d,{children:[Object(_.jsx)(o.b,{path:"/",element:Object(_.jsx)(G,{products:t.products,loading:r,error:c})}),Object(_.jsx)(o.b,{path:"/:productId",element:Object(_.jsx)($,{products:t.products})}),Object(_.jsx)(o.b,{path:"/cart",element:n.length<1?Object(_.jsx)(o.a,{to:"/"}):Object(_.jsx)(ie,{products:n})}),Object(_.jsx)(o.b,{path:"/login",element:Object(_.jsx)(xe,{})}),Object(_.jsx)(o.b,{path:"/register",element:Object(_.jsx)(fe,{})}),Object(_.jsx)(o.b,{path:"/checkout",element:Object(_.jsx)(ke.Elements,{stripe:l,children:Object(_.jsx)(Se,{})})})]})]})},Pe=n(14),Ae=function(e){var t=Object(a.useState)({products:[],total:0,skip:1,limit:0}),n=Object(l.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!0),o=Object(l.a)(s,2),i=o[0],u=o[1],d=Object(a.useState)(!1),O=Object(l.a)(d,2),m=O[0],h=O[1];return{reqData:Object(a.useCallback)(Object(b.a)(Object(j.a)().mark((function t(){var n,c;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),h(null),t.prev=2,t.next=5,fetch(e.url,{method:e.method?e.method:"GET",body:e.body?JSON.stringify(e.body):null,headers:e.headers?e.headers:{}});case 5:if((n=t.sent).ok){t.next=8;break}throw new Error("somthing went wrong!");case 8:return t.next=10,n.json();case 10:c=t.sent,r(c),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),h(!0);case 17:u(!1);case 18:case"end":return t.stop()}}),t,null,[[2,14]])}))),[]),items:c,loading:i,error:m}},Be={products:[],totalAmount:0},Re=function(e,t){if("Add"===t.type){var n,c=e.totalAmount+t.payload.quantity*t.payload.price,r=e.products.findIndex((function(e){return e.id===t.payload.id})),a=e.products[r];if(a){var s=Object(Y.a)(Object(Y.a)({},a),{},{quantity:t.payload.quantity});(n=Object(Pe.a)(e.products))[r]=s,c=e.totalAmount-a.quantity*a.price+t.payload.quantity*t.payload.price}else n=e.products.concat(t.payload);return{products:n,totalAmount:c}}if("Remove"===t.type){var o,l,i=e.products.find((function(e){return e.id===t.id}));return i?(o=e.products.filter((function(e){return e.id!==t.id})),l=e.totalAmount-i.price*i.quantity):o=Object(Pe.a)(e.products),{products:o,totalAmount:l}}return{intialProduct:Be}},De=function(e){var t=Object(a.useReducer)(Re,Be),n=Object(l.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),o=Object(l.a)(s,2),i=o[0],u=o[1],j=Ae({url:"https://dummyjson.com/products"}),b=j.reqData,O=j.items,m=j.loading,h=j.error;Object(a.useEffect)((function(){b()}),[]);return Object(_.jsx)(d.Provider,{value:{items:O,products:c.products,totalAmount:c.totalAmount,showCart:i,error:h,loading:m,onShowCart:function(){u(!0)},onHideCart:function(){u(!1)},onAddProduct:function(e){r({type:"Add",payload:e})},onUpdateCart:function(e){r({type:"updateCart",payload:e})},onRemoveProduct:function(e){r({type:"Remove",id:e})}},children:e.children})};n(63);r.a.createRoot(document.getElementById("root")).render(Object(_.jsxs)(De,{children:[" ",Object(_.jsx)(Ee,{})," "]}))}},[[64,1,2]]]);
//# sourceMappingURL=main.b7cff315.chunk.js.map